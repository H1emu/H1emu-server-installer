#!/bin/bash

echo "Closing services if they exist"
pm2 kill
#!/bin/bash

echo "Starting services"
cd h1z1-server-QuickStart
pm2 start npm --name "ZoneServer" --watch -- run zone-server-2016

if [ "$PRIVATE_SERVER" = "true" ]; then
  pm2 start npm --name "LoginServer" --watch -- run login-server-2016
fi

# Setup pm2 to start on boot
pm2 startup

# Delay to ensure services start correctly
sleep 5

# Display welcome messages and server information
echo "**********************************************************************************************"
echo "**********************************************************************************************"
echo "**********************************************************************************************"
echo "**********************************************************************************************"
echo "**********************************************************************************************"
echo "**********************************************************************************************"
echo "**********************************************************************************************"
echo "**********************************************************************************************"
echo "****************██╗░░██╗░░███╗░░███████╗███╗░░░███╗██╗░░░██╗**********************************"
echo "****************██║░░██║░████║░░██╔════╝████╗░████║██║░░░██║**********************************"
echo "****************███████║██╔██║░░█████╗░░██╔████╔██║██║░░░██║**********************************"
echo "****************██╔══██║╚═╝██║░░██╔══╝░░██║╚██╔╝██║██║░░░██║**********************************"
echo "****************██║░░██║███████╗███████╗██║░╚═╝░██║╚██████╔╝**********************************"
echo "****************╚═╝░░╚═╝╚══════╝╚══════╝╚═╝░░░░░╚═╝░╚═════╝░**********************************"
echo "**********************************************************************************************"
echo "**********************************************************************************************"
echo "**********************************************************************************************"
echo "****************Access your MongoDB with http://SERVERIP:4321/ *******************************"
echo "**********************************************************************************************"
echo "****************To Connect to server with Game client SERVERIP:1115***************************"
echo "**********************************************************************************************"
echo "****************Use (pm2 kill) to stop server*************************************************"
echo "**********************************************************************************************"
echo "****************Use (./start.sh) to start server**********************************************"
echo "**********************************************************************************************"
echo "****************Your H1emu Server Should now be running***************************************"
echo "**********************************************************************************************"
echo "**********************************************************************************************"
echo "**********************************************************************************************"
